{% extends "base.html" %}

{% block title %}Chat Log{% endblock %}

{% block content %}
<div class="mb-8">
    <h1 class="text-3xl font-bold text-white">Coach Chat Log</h1>
    <p class="text-brand-light-gray mt-1">A complete history of your conversations with the AI coach.</p>
</div>

<div class="bg-brand-gray rounded-xl shadow-lg p-6 lg:p-8">
    {% if chat_history %}
        <div class="space-y-6">
            {% for message in chat_history %}
                {% if message.role == 'user' %}
                    <div class="text-right">
                        <p class="text-xs text-gray-400 mb-1">You said:</p>
                        <p class="inline-block bg-brand-blue text-white rounded-lg px-4 py-2 max-w-xl">{{ message.content }}</p>
                    </div>
                {% elif message.role == 'model' %}
                    <div>
                        <p class="text-xs text-gray-400 mb-1">Coach replied:</p>
                        <div class="prose prose-invert max-w-none prose-p:text-lg">
                            {{ message.content | safe }}
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <p class="text-brand-light-gray">You have no chat history yet.</p>
    {% endif %}
</div>

<div class="mt-8 flex justify-between items-center">
    <a href="/dashboard" class="text-brand-blue hover:underline">‚Üê Back to Dashboard</a>
    
    <form action="/clear_chat" method="post" onsubmit="return confirm('Are you sure you want to permanently delete your entire chat history?');">
        <button type="submit" class="text-sm text-gray-400 hover:text-white hover:underline">
            Delete Chat History
        </button>
    </form>
</div>
{% endblock %}